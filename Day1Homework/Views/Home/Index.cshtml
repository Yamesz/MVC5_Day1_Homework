@model MoneyRecordViewModel
@{
    ViewBag.Title = "Home Page";
}

<div class="well" style="margin-top:60px">
    
    
    @*@using (Ajax.BeginForm("index",new { Controller ="Home"}, new AjaxOptions() { UpdateTargetId = "ajax" }, new { @class = "form-horizontal" }))*@
    @using (Html.BeginForm("index", "Home", FormMethod.Post, new { @class = "form-horizontal" }))
    {
        @Html.AntiForgeryToken()

        <div class="form-group">
            @Html.LabelFor(model => model.category, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-sm-10">
                @Html.DropDownListFor(model => model.category,
                                        EnumHelper.GetSelectList(typeof(MoneyCategory)),
                                        "--請選擇--",
                                        new { @class = "form-control" }
                                     )
                @Html.ValidationMessageFor(model => model.category, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.money, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-sm-10">
                @Html.EditorFor(model => model.money, new
                   {
                       htmlAttributes = new
                       {
                           @class = "form-control",
                           placeholder = Html.DisplayNameFor(m => m.money)
                       }
                   })
                @Html.ValidationMessageFor(model => model.money, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.date, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-sm-10">
                @Html.EditorFor(model => model.date, new
                   {
                       htmlAttributes = new {
                           @class = "form-control",
                           placeholder = Html.DisplayNameFor(m => m.date)
                       }
                   })
                @Html.ValidationMessageFor(model => model.date, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.description, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-sm-10">
                @Html.EditorFor(model => model.description, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.description, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-8 col-sm-4">
                <button type="submit" class="btn btn-default">送出</button>
            </div>
        </div>
    }
</div>
@Html.Action("MoneyRecordList")

@section pagejs
{
    <script>
        $.validator.addMethod('notgreaterthantoday', function (value, element, param) {
                if (value) {
                    var d = Date.parse(value);
                    if (d > new Date) {
                        return false;
                    }
                }
                return true;
            });
            $.validator.unobtrusive.adapters.add(
            'notgreaterthantoday', ['other'], function (options) {
                options.rules['notgreaterthantoday'] = '#' + options.params.other;
                if (options.message) {
                    options.messages['notgreaterthantoday'] = options.message;
                }
            });

    </script>

    @if (ViewData["AlertViewModel"] != null)
    {
        @Html.Partial("_sweetalert2", ViewData["AlertViewModel"])
    }
}